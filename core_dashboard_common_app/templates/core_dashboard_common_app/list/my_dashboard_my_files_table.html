{% load dict_key_extras %}

<div class="btn-group float-right">
	<a class="btn btn-secondary" id="upload-blob-btn">
        <i class="fas fa-upload"></i> Upload File
    </a>
</div>
<br/><br/>

<table class="table table-bordered table-striped table-hover">
    <thead>
        <tr>
            {% if data.menu %}
                <th>
                    <input type="checkbox" id="select_all_{{group}}"
                           onchange="selectAll(this, '{{group}}')">
                </th>
            {% endif %}
            <th>File name</th>
            <th>Upload date</th>
            {% if come_from_admin %}
                <th>User</th>
            {% endif %}
            {% if not data.title%}
                <th>Workspace</th>
            {% endif %}
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for object in objects %}
            <tr class="{{ rowcolors }}" objectid="{{object.file.id}}">
                {% if data.menu %}
                <td id="actionCheckbox_{{forloop.counter}}">
                    <input type="checkbox" id={{object.file.id}} name={{group}}>
                </td>
                {% endif %}
                <td>
                    <a href="{% url 'core_main_app_blob_detail'%}?id={{object.file.id}}">
                    {{ object.file.filename }}
                    </a>
                </td>
                <td>{{ object.date }}</td>
                {% if come_from_admin %}
                    <td>
                        {{object.user}}
                    </td>
                {% endif %}
                {% if not data.title%}
                    <td>
                        {% if object.file.workspace %}
                            {{ object.file.workspace.title }}
                        {% else %}
                            None
                        {% endif %}
                    </td>
                {% endif %}
                <td>
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownActions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-sliders"></i> Actions
                    </button>

                    <div class="dropdown-menu" aria-labelledby="dropdownActions">
                        <a class="dropdown-item download-{{data.document}}-btn" href="{{ object.url }}">
                            <i class="fas fa-list"></i> Download
                        </a>
                        {% if data.share_pid_button %}
                            <a id="pid-sharing" class="share-btn dropdown-item" href="#">
                                <i class="fas fa-link"></i> Share PID
                            </a>
                        {% endif %}
                        <div class="dropdown-divider"></div>
                        {% if object.can_change_workspace %}
                            <a class="dropdown-item assign-workspace-record-btn" href="#">
                                <i class="fas fa-folder"></i> Change workspace
                            </a>
                        {% endif %}
                        {% if object.is_owner %}
                            <a class="dropdown-item change-owner-btn" href="#">
                                <i class="fas fa-folder"></i> Change Owner
                            </a>
                        {% endif %}
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item delete-document-btn" objectid="{{ object.file.id }}" href="#">
                            <i class="fas fa-trash"></i> Delete
                        </a>
                    </div>
                </td>
            </tr>
        {% empty %}
        <tr>
            <td class="empty" style="text-align: center;" colspan="4">
                 No {{document}} found.
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% include 'core_main_app/common/pagination/data_source_pagination.html' with pagination=data.pagination%}
